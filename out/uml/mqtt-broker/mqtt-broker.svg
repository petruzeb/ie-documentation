<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1065px" preserveAspectRatio="none" style="width:526px;height:1065px;" version="1.1" viewBox="0 0 526 1065" width="526px" zoomAndPan="magnify"><defs><filter height="300%" id="frcjcc5rdh8c2" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--cluster Compute--><polygon fill="#FFFFFF" filter="url(#frcjcc5rdh8c2)" points="25,16,96,16,103,38.4883,209,38.4883,209,438,25,438,25,16" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="25" x2="103" y1="38.4883" y2="38.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="65" x="29" y="31.5352">Compute</text><!--cluster EC2 instance--><polygon fill="#FFFFFF" filter="url(#frcjcc5rdh8c2)" points="33,53,43,43,201,43,201,420,191,430,33,430,33,53" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="191" x2="200" y1="53" y2="44"/><line style="stroke: #000000; stroke-width: 1.5;" x1="33" x2="191" y1="53" y2="53"/><line style="stroke: #000000; stroke-width: 1.5;" x1="191" x2="191" y1="53" y2="430"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="92" x="67" y="69.5352">EC2 instance</text><!--cluster IoT--><polygon fill="#FFFFFF" filter="url(#frcjcc5rdh8c2)" points="14,477,44,477,51,499.4883,220,499.4883,220,743,14,743,14,477" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="14" x2="51" y1="499.4883" y2="499.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="24" x="18" y="492.5352">IoT</text><!--cluster SQS--><polygon fill="#FFFFFF" filter="url(#frcjcc5rdh8c2)" points="18,774,52,774,59,796.4883,366,796.4883,366,1053,18,1053,18,774" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="18" x2="59" y1="796.4883" y2="796.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28" x="22" y="789.5352">SQS</text><!--cluster DynamoDB--><path d="M374,876 C374,866 444,866 444,866 C444,866 514,866 514,876 L514,956 C514,966 444,966 444,966 C444,966 374,966 374,956 L374,876 " fill="#FFFFFF" filter="url(#frcjcc5rdh8c2)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M374,876 C374,886 444,886 444,886 C444,886 514,886 514,876 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="79" x="404.5" y="901.5352">DynamoDB</text><!--entity mqtt broker--><rect fill="#6A9EFF" filter="url(#frcjcc5rdh8c2)" height="50.0215" style="stroke: #000000; stroke-width: 1.5;" width="138" x="48" y="372"/><rect fill="#6A9EFF" height="10" style="stroke: #000000; stroke-width: 1.5;" width="15" x="166" y="377"/><rect fill="#6A9EFF" height="2" style="stroke: #000000; stroke-width: 1.5;" width="4" x="164" y="379"/><rect fill="#6A9EFF" height="2" style="stroke: #000000; stroke-width: 1.5;" width="4" x="164" y="383"/><text fill="#FFFFFF" font-family="sans-serif" font-size="17" lengthAdjust="spacingAndGlyphs" textLength="98" x="63" y="408.4355">mqtt broker</text><!--entity mqtt client--><rect fill="#6A9EFF" filter="url(#frcjcc5rdh8c2)" height="50.0215" style="stroke: #000000; stroke-width: 1.5;" width="129" x="52.5" y="75"/><rect fill="#6A9EFF" height="10" style="stroke: #000000; stroke-width: 1.5;" width="15" x="161.5" y="80"/><rect fill="#6A9EFF" height="2" style="stroke: #000000; stroke-width: 1.5;" width="4" x="159.5" y="82"/><rect fill="#6A9EFF" height="2" style="stroke: #000000; stroke-width: 1.5;" width="4" x="159.5" y="86"/><text fill="#FFFFFF" font-family="sans-serif" font-size="17" lengthAdjust="spacingAndGlyphs" textLength="89" x="67.5" y="111.4355">mqtt client</text><!--entity Act--><ellipse cx="117" cy="533" fill="#FEFECE" filter="url(#frcjcc5rdh8c2)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="174" x="30" y="563.5352">local_gateway_to_aws_iot</text><!--entity "EI_store_to_sqs"--><rect fill="#6A9EFF" filter="url(#frcjcc5rdh8c2)" height="50.0215" style="stroke: #000000; stroke-width: 1.5;" width="167" x="33.5" y="685"/><rect fill="#6A9EFF" height="10" style="stroke: #000000; stroke-width: 1.5;" width="15" x="180.5" y="690"/><rect fill="#6A9EFF" height="2" style="stroke: #000000; stroke-width: 1.5;" width="4" x="178.5" y="692"/><rect fill="#6A9EFF" height="2" style="stroke: #000000; stroke-width: 1.5;" width="4" x="178.5" y="696"/><text fill="#FFFFFF" font-family="sans-serif" font-size="17" lengthAdjust="spacingAndGlyphs" textLength="127" x="48.5" y="721.4355">EI_store_to_sqs</text><!--entity IngressQ--><path d="M31.5,801 L144.5,801 C149.5,801 149.5,814.2441 149.5,814.2441 C149.5,814.2441 149.5,827.4883 144.5,827.4883 L31.5,827.4883 C26.5,827.4883 26.5,814.2441 26.5,814.2441 C26.5,814.2441 26.5,801 31.5,801 " fill="#FEFECE" filter="url(#frcjcc5rdh8c2)" style="stroke: #A80036; stroke-width: 1.5;"/><path d="M144.5,801 C139.5,801 139.5,814.2441 139.5,814.2441 C139.5,827.4883 144.5,827.4883 144.5,827.4883 " fill="none" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="103" x="31.5" y="819.5352">EI-mqtt-ingres</text><!--entity ErrorQ--><path d="M33.5,1019 L138.5,1019 C143.5,1019 143.5,1032.2441 143.5,1032.2441 C143.5,1032.2441 143.5,1045.4883 138.5,1045.4883 L33.5,1045.4883 C28.5,1045.4883 28.5,1032.2441 28.5,1032.2441 C28.5,1032.2441 28.5,1019 33.5,1019 " fill="#FEFECE" filter="url(#frcjcc5rdh8c2)" style="stroke: #A80036; stroke-width: 1.5;"/><path d="M138.5,1019 C133.5,1019 133.5,1032.2441 133.5,1032.2441 C133.5,1045.4883 138.5,1045.4883 138.5,1045.4883 " fill="none" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="95" x="33.5" y="1037.5352">EI-mqtt-error</text><!--entity ProcessedQ--><path d="M184,1019 L324,1019 C329,1019 329,1032.2441 329,1032.2441 C329,1032.2441 329,1045.4883 324,1045.4883 L184,1045.4883 C179,1045.4883 179,1032.2441 179,1032.2441 C179,1032.2441 179,1019 184,1019 " fill="#FEFECE" filter="url(#frcjcc5rdh8c2)" style="stroke: #A80036; stroke-width: 1.5;"/><path d="M324,1019 C319,1019 319,1032.2441 319,1032.2441 C319,1045.4883 324,1045.4883 324,1045.4883 " fill="none" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="130" x="184" y="1037.5352">EI-mqtt-processed</text><!--entity IngressErrorQ--><path d="M189.5,801 L352.5,801 C357.5,801 357.5,814.2441 357.5,814.2441 C357.5,814.2441 357.5,827.4883 352.5,827.4883 L189.5,827.4883 C184.5,827.4883 184.5,814.2441 184.5,814.2441 C184.5,814.2441 184.5,801 189.5,801 " fill="#FEFECE" filter="url(#frcjcc5rdh8c2)" style="stroke: #A80036; stroke-width: 1.5;"/><path d="M352.5,801 C347.5,801 347.5,814.2441 347.5,814.2441 C347.5,827.4883 352.5,827.4883 352.5,827.4883 " fill="none" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="153" x="189.5" y="819.5352">EI-mqtt-ingress-error</text><!--entity "mqtt-data"--><rect fill="#6A9EFF" filter="url(#frcjcc5rdh8c2)" height="50.0215" style="stroke: #000000; stroke-width: 1.5;" width="124" x="382" y="908"/><rect fill="#6A9EFF" height="10" style="stroke: #000000; stroke-width: 1.5;" width="15" x="486" y="913"/><rect fill="#6A9EFF" height="2" style="stroke: #000000; stroke-width: 1.5;" width="4" x="484" y="915"/><rect fill="#6A9EFF" height="2" style="stroke: #000000; stroke-width: 1.5;" width="4" x="484" y="919"/><text fill="#FFFFFF" font-family="sans-serif" font-size="17" lengthAdjust="spacingAndGlyphs" textLength="84" x="397" y="944.4355">mqtt-data</text><!--link mqtt broker to Act--><path d="M117,422.2618 C117,450.708 117,495.9346 117,518.7876 " fill="none" id="mqtt broker-Act" style="stroke: #222266; stroke-width: 1.0;"/><polygon fill="#222266" points="117,523.8323,121,514.8323,117,518.8323,113,514.8323,117,523.8323" style="stroke: #222266; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="35" x="118" y="465.5684">SEND</text><!--link mqtt client to mqtt broker--><path d="M117,125.3593 C117,142.5999 117,165.9262 117,186.5 C117,186.5 117,186.5 117,310.5 C117,329.145 117,350.0506 117,366.6386 " fill="none" id="mqtt client-mqtt broker" style="stroke: #222266; stroke-width: 1.0;"/><polygon fill="#222266" points="117,371.6407,121,362.6407,117,366.6407,113,362.6407,117,371.6407" style="stroke: #222266; stroke-width: 1.0;"/><!--link Act to "EI_store_to_sqs"--><path d="M117,542.0208 C117,567.0849 117,638.4277 117,679.6294 " fill="none" id="Act-&quot;EI_store_to_sqs&quot;" style="stroke: #222266; stroke-width: 1.0;"/><polygon fill="#222266" points="117,684.7445,121,675.7445,117,679.7445,113,675.7445,117,684.7445" style="stroke: #222266; stroke-width: 1.0;"/><!--link "EI_store_to_sqs" to IngressQ--><path d="M109.9799,735.1755 C104.7541,753.9165 97.7432,779.0588 93.0585,795.859 " fill="none" id="&quot;EI_store_to_sqs&quot;-IngressQ" style="stroke: #222266; stroke-width: 1.0;"/><polygon fill="#222266" points="91.6839,800.7888,97.9545,793.1941,93.027,795.9726,90.2485,791.0451,91.6839,800.7888" style="stroke: #222266; stroke-width: 1.0;"/><!--link "EI_store_to_sqs" to IngressErrorQ--><path d="M154.2791,735.1755 C183.2263,754.7243 222.4873,781.2382 247.2837,797.9838 " fill="none" id="&quot;EI_store_to_sqs&quot;-IngressErrorQ" style="stroke: #222266; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#222266" points="251.4372,800.7888,246.2174,792.4369,247.2936,797.9905,241.7401,799.0667,251.4372,800.7888" style="stroke: #222266; stroke-width: 1.0;"/><!--link IngressQ to ErrorQ--><path d="M87.8779,827.3087 C87.5347,864.7198 86.5608,970.8719 86.1677,1013.7247 " fill="none" id="IngressQ-ErrorQ" style="stroke: #222266; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#222266" points="86.1205,1018.8655,90.2031,1009.9027,86.1665,1013.8657,82.2035,1009.8291,86.1205,1018.8655" style="stroke: #222266; stroke-width: 1.0;"/><!--link IngressQ to ProcessedQ--><path d="M98.1342,827.3087 C126.8535,865.0245 208.7734,972.606 240.8718,1014.7594 " fill="none" id="IngressQ-ProcessedQ" style="stroke: #222266; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#222266" points="243.9985,1018.8655,241.7285,1009.2818,240.9694,1014.8875,235.3637,1014.1284,243.9985,1018.8655" style="stroke: #222266; stroke-width: 1.0;"/><!--link IngressQ to "mqtt-data"--><path d="M149.7129,824.2923 C230.7652,837.9457 364.0394,860.9193 374,866 C391.9439,875.1528 408.4164,890.4018 420.8681,904.0416 " fill="none" id="IngressQ-&quot;mqtt-data&quot;" style="stroke: #222266; stroke-width: 1.0;"/><polygon fill="#222266" points="424.2714,907.8396,421.2444,898.4674,420.9347,904.1158,415.2864,903.8061,424.2714,907.8396" style="stroke: #222266; stroke-width: 1.0;"/><!--
@startuml

skinparam component {
    FontColor          blackπ
    AttributeFontColor black
    FontSize           17
    AttributeFontSize  15
    AttributeFontname  Droid Sans Mono
    BackgroundColor    #6A9EFF
    BorderColor        black
    ArrowColor         #222266
}

skinparam componentStyle uml2

    package "Compute" {
	    node "EC2 instance" {
		    [mqtt broker]
            [mqtt client]
	    }
    }

    package "IoT" {
        interface "local_gateway_to_aws_iot" as Act
        ["EI_store_to_sqs"]
        [mqtt broker] - -> Act: **SEND**
	}

    package "SQS" {
        queue "EI-mqtt-ingres" as IngressQ
        queue "EI-mqtt-error" as ErrorQ
        queue "EI-mqtt-processed" as ProcessedQ
        queue "EI-mqtt-ingress-error" as IngressErrorQ
        
	}


    database "DynamoDB" {
        ["mqtt-data"] 

	}

[mqtt client] - -> [mqtt broker]
Act - -> ["EI_store_to_sqs"]
["EI_store_to_sqs"] - -> IngressQ
["EI_store_to_sqs"] ..> IngressErrorQ
IngressQ ..> ErrorQ
IngressQ ..> ProcessedQ
IngressQ - -> ["mqtt-data"]

@enduml

PlantUML version 1.2018.12(Sun Oct 21 12:15:15 CEST 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.2+9
Operating System: Mac OS X
OS Version: 10.14.3
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>